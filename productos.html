<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Blog informativo de Biotecnolog√≠as RLD">
    <title>Nuestros Productos</title>
    <link rel="icon" href="img/Logo_Final.jpg">
    <link rel="prefetch" href="nosotros.html" as="DOCTYPE">
    <link rel="preconnect" href="css/normalize.css" as="stylesheet">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="preconnect" href="css/style.css" as="styles">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preload" href="img/Logo_Final.jpg" as="image">
    <link rel="preload" href="img/invernaderos1.png" as="image">
</head>
<body>
  <div class="carrito-icono" id="btn-abrir-carrito" onclick="toggleCarrito()">
    üõí <span id="contador-carrito">0</span>
</div>

    <header class="header6">
        <div class="contenedor">
            <div class="barra">
                <a class="logo" href="index.html">
                    <h1 class="logo__nombre no-margin centrar-texto" style="color: black;">Biotecnolog√≠as<span class="logo__bold">RLD</span></h1>
                </a>
                <nav class="navegacion">
                    <a href="nosotros.html" class="navegacion__enlace2" style="color: black;">Nosotros</a>
                    <a href="visitas.html" class="navegacion__enlace2" style="color: black;">Visitas</a>
                    <a href="contacto.html" class="navegacion__enlace2" style="color: black;">Contacto</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="productos">
        <h1 style="text-align: center;">Conoce nuestros productos</h1>
        <img src="img/prompt.png" alt="prompt" style="border:solid rgb(163, 165, 34); border-radius: 2rem;">
  <!-- Producto 1 -->
  <div class="producto">
    <div class="carrusel">
      <div class="carrusel-inner">
        <div class="carrusel-item"><img src="img/500g.jpg" alt="Producto 1 img1"></div>
        <div class="carrusel-item"><img src="img/bsf1.jpeg" alt="Producto 1 img2"></div>
        <div class="carrusel-item">
          <video src="img/sponsor.mp4" autoplay muted loop></video>
        </div>
      </div>
    </div>
    <h4 style="text-align: center;">Suplemento para Aves y Reptiles: Larva Mosca Soldado Negra 500 g</h4>
    <p style="text-align: center; font-weight: bold;">¬°El alimento ideal para tus animales! </p>
    <p style="text-align: justify;">Descubre nuestra larva de mosca soldado negra deshidratada, una fuente de prote√≠na premium dise√±ada para satisfacer las necesidades nutricionales de tus animales. Alimento 100% natural.</p>
    <div class="producto-info">
    <label for="cantidad1">Cantidad:</label>
    <input type="number" id="cantidad1" min="1" max="10" value="1" class="input-cantidad">
    <p class="precio-producto">Precio: $<span id="precio1">380</span></p>
    <button onclick="agregarAlCarrito('Larva deshidratada 500g', 'img/500g.jpg', 380, document.getElementById('cantidad1').value)" class="boton boton--agregar">Agregar al carrito</button>
    </div>
  </div>

  <!-- Producto 2 -->
  <div class="producto">
    <div class="carrusel">
      <div class="carrusel-inner">
            <div class="carrusel-item">
                <img src="img/1000g.jpg" alt="Producto 2 img1">
            </div>
            <div class="carrusel-item">
                <img src="img/1kgp2.jpg" alt="Producto 2 img2">
            </div>
            <div class="carrusel-item">
               <video src="img/sponsor.mp4" autoplay muted loop></video>
            </div>
      </div>
    </div>
    <h4 style="text-align: center;">Suplemento para Aves y Reptiles: Larva Mosca Soldado Negra 1 Kg</h4>
    <p style="text-align: center; font-weight: bold;">Beneficios comprobados: </p>
        <p style="text-align: justify; margin-bottom: -2rem;">- Mejora la digesti√≥n y absorci√≥n de nutrientes.</p>
        <p style="text-align: justify;margin-bottom: -2rem;">- Promueve un sistema inmunol√≥gico m√°s fuerte.</p>
        <p style="text-align: justify; margin-bottom: 0.3rem">- Incrementa la energ√≠a y vitalidad de tus animales.</p>
    <div class="producto-info">
    <label for="cantidad1">Cantidad:</label>
    <input type="number" id="cantidad1" min="1" max="10" value="1" class="input-cantidad">
    <p class="precio-producto">Precio: $<span id="precio1">560</span></p>
    <button onclick="agregarAlCarrito('Larva deshidratada 1 Kg', 'img/1000g.jpg', 560, document.getElementById('cantidad1').value)" class="boton boton--agregar">Agregar al carrito</button>
    </div>
  </div>
<!-- Producto 3 -->
  <div class="producto">
    <div class="carrusel">
      <div class="carrusel-inner">
            <div class="carrusel-item">
                <img src="img/bsf1.jpeg" alt="Producto 2 img1">
            </div>
            <div class="carrusel-item">
                <video src="img/sponsor2.mp4" autoplay muted loop></video>
            </div>
            <div class="carrusel-item">
                <video src="img/viva1.mp4" autoplay muted loop></video>
            </div>
      </div>
    </div>
    <h4 style="text-align: center;">Alimento vivo: larva de Mosca Soldado Negra 250 pz</h4>
    <p style="text-align: center; font-weight: bold;">Larva Viva: prote√≠na que se mueve.</p>
        <p style="text-align: justify; margin-bottom: -2rem;">Fuente rica en prote√≠na y grasa ideal para la alimentaci√≥n de aves y reptiles. Criadas con residuos org√°nicos seleccionados, nuestras larvas son una opci√≥n sustentable, fresca y altamente nutritiva. Se entregan vivas, listas para consumo o engorda.</p>
        <br>
    <div class="producto-info">
    <label for="cantidad1">Cantidad:</label>
    <input type="number" id="cantidad1" min="1" max="10" value="1" class="input-cantidad">
    <p class="precio-producto">Precio: $<span id="precio1">350</span></p>
    <button onclick="agregarAlCarrito('Larva viva 250 u', 'img/bsf1.jpeg', 350, document.getElementById('cantidad1').value)" class="boton boton--agregar">Agregar al carrito</button>
    </div>
  </div>

  <!-- Producto 4 -->
  <div class="producto">
    <div class="carrusel">
      <div class="carrusel-inner">
            <div class="carrusel-item">
                <img src="img/frassp4.jpg" alt="Producto 2 img1">
            </div>
            <div class="carrusel-item">
                <img src="img/frassp1.jpg" alt="Producto 2 img1">
            </div>
            <div class="carrusel-item">
                <img src="img/frassp3.jpg" alt="Producto 2 img1">
            </div>
      </div>
    </div>
    <h4 style="text-align: center;">Fertilizante Org√°nico: Frass de Mosca Soldado</h4>
    <h4 style="text-align: center; font-weight: bold;">NPK 3-2-2</h4>
        <p style="text-align: justify; margin-bottom: -2rem;">¬°Nutre tu suelo de forma natural! Nuestro frass de Mosca Soldado Negra es un fertilizante 100% org√°nico, rico en nitr√≥geno, f√≥sforo y potasio, ideal para huertos, jardines y cultivos. Mejora la salud del suelo, estimula el crecimiento de las plantas y del microbioma, adem√°s es amigable con el medio ambiente. ¬°Elige una agricultura sustentable!</p>
        <br>
    <div class="producto-info" style="margin-top: -1rem;">
  <label for="presentacionFrass">Presentaci√≥n:</label>
  <select class="input-cantidad" style="width: auto;" id="presentacionFrass" onchange="actualizarPrecioFrass()">
    <option value="1">1 Kg - $180</option>
    <option value="10">10 Kg - $950</option>
  </select>

  <label for="cantidadFrass">Cantidad:</label>
  <input type="number" id="cantidadFrass" min="1" max="10" value="1" class="input-cantidad">

  <p class="precio-producto">Precio: $<span id="precioFrass">180</span></p>

  <button onclick="agregarFrassAlCarrito('img/frassp4.jpg')" class="boton boton--agregar">Agregar al carrito</button>
</div>

  </div>
</main>
<div id="carrito" class="carrito oculto">
    <h3 style="text-align: center;">Tu Carrito</h3>
    <div id="carrito-items"></div>
    <p id="envio-gratis" style="color: green; font-weight: bold; display: none;">¬°Tienes env√≠o gratis!</p>
    <p style="text-align: center; font-weight: bolder;">Total: $<span id="total">0</span></p>
    <button id="btn-pagar" onclick="mostrarFormularioPago()" class="boton boton--pagar">Pagar</button>
</div>
<div id="formularioPago" class="modal oculto">
    <h3 class="modal-title">Datos de Env√≠o</h3>
    <form id="form-datos" action="https://formspree.io/f/myzpejjo" method="POST">
        <input type="text" name="nombre" placeholder="Nombre y Apellido" required>
        <input type="tel" name="telefono" placeholder="N√∫mero de contacto" required>
        <input type="email" name="correo" placeholder="Correo electr√≥nico" required>
        <input type="text" name="calle" placeholder="Calle y n√∫mero" required>
        <input type="text" name="colonia" placeholder="Colonia" required>
        <input type="text" name="municipio" placeholder="Municipio o Delegaci√≥n" required>
        <select name="estado" required>
  <option value="" disabled selected>Selecciona tu estado</option>
  <option value="Aguascalientes">Aguascalientes</option>
  <option value="Baja California">Baja California</option>
  <option value="Baja California Sur">Baja California Sur</option>
  <option value="Campeche">Campeche</option>
  <option value="Chiapas">Chiapas</option>
  <option value="Chihuahua">Chihuahua</option>
  <option value="Ciudad de M√©xico">Ciudad de M√©xico</option>
  <option value="Coahuila">Coahuila</option>
  <option value="Colima">Colima</option>
  <option value="Durango">Durango</option>
  <option value="Estado de M√©xico">Estado de M√©xico</option>
  <option value="Guanajuato">Guanajuato</option>
  <option value="Guerrero">Guerrero</option>
  <option value="Hidalgo">Hidalgo</option>
  <option value="Jalisco">Jalisco</option>
  <option value="Michoac√°n">Michoac√°n</option>
  <option value="Morelos">Morelos</option>
  <option value="Nayarit">Nayarit</option>
  <option value="Nuevo Le√≥n">Nuevo Le√≥n</option>
  <option value="Oaxaca">Oaxaca</option>
  <option value="Puebla">Puebla</option>
  <option value="Quer√©taro">Quer√©taro</option>
  <option value="Quintana Roo">Quintana Roo</option>
  <option value="San Luis Potos√≠">San Luis Potos√≠</option>
  <option value="Sinaloa">Sinaloa</option>
  <option value="Sonora">Sonora</option>
  <option value="Tabasco">Tabasco</option>
  <option value="Tamaulipas">Tamaulipas</option>
  <option value="Tlaxcala">Tlaxcala</option>
  <option value="Veracruz">Veracruz</option>
  <option value="Yucat√°n">Yucat√°n</option>
  <option value="Zacatecas">Zacatecas</option>
</select>
        <input type="tel" name="cp" placeholder="C√≥digo Postal" required>
        <input type="hidden" name="pedido" id="form-pedido">
        <input type="hidden" name="total" id="total-final">
        <div class="modal-botones">
            <button type="button" onclick="enviarFormularioYSPEI()" class="boton boton--pagar">Pagar V√≠a SPEI</button>
        </div>
    </form>
</div>
<div id="modal-overlay" class="oculto overlay" onclick="cerrarFormularioPago()"></div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  function actualizarPrecioFrass() {
    const presentacion = document.getElementById("presentacionFrass").value;
    const precioSpan = document.getElementById("precioFrass");
    precioSpan.textContent = presentacion === "10" ? 950 : 180;
  }

  function agregarFrassAlCarrito(imagen) {
    const presentacion = document.getElementById("presentacionFrass").value;
    const cantidad = document.getElementById("cantidadFrass").value;
    const precio = presentacion === "10" ? 950 : 180;
    const nombre = presentacion === "10" ? "Frass 10 Kg" : "Frass 1 Kg";

    agregarAlCarrito(nombre, imagen, precio, cantidad);
  }
function generarNumeroPedidoAleatorio() {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let resultado = '';
  for (let i = 0; i < 4; i++) {
    resultado += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return 'PED-' + resultado;
}
let numeroPedido = "";
let carrito = [];
let total = 0;
const ENVIO_GRATIS_MIN = 500;
const COSTO_ENVIO = 150;

function toggleCarrito() {
    document.getElementById("carrito").classList.toggle("oculto");
}

function agregarAlCarrito(nombre, imagen, precio, cantidad) {
    cantidad = parseInt(cantidad);

    if (isNaN(cantidad) || cantidad < 1) {
        Swal.fire({
            icon: 'warning',
            title: 'Cantidad inv√°lida',
            text: 'Debes ingresar al menos 1 unidad.',
            timer: 2000,
            showConfirmButton: false,
            timerProgressBar: true,
            customClass: {
                popup: 'my-timer'
            }
        });
        return;
    }

    // Buscar si ya existe el producto en el carrito
    const existente = carrito.find(item => item.nombre === nombre);

    if (existente) {
        const nuevaCantidad = existente.cantidad + cantidad;
        if (nuevaCantidad > 10) {
            Swal.fire({
                icon: 'warning',
                title: 'L√≠mite excedido',
                text: 'S√≥lo puedes tener hasta 10 unidades por producto.',
                timer: 2000,
                showConfirmButton: false,
                timerProgressBar: true,
                customClass: {
                    popup: 'my-timer'
                }
            });
            return;
        }
        existente.cantidad = nuevaCantidad;
    } else {
        if (cantidad > 10) {
            Swal.fire({
                icon: 'warning',
                title: 'Demasiado producto',
                text: 'S√≥lo puedes agregar un m√°ximo de 10 unidades por producto.',
                timer: 2000,
                showConfirmButton: false,
                timerProgressBar: true,
                customClass: {
                    popup: 'my-timer'
                }
            });
            return;
        }

        const producto = { nombre, imagen, precio, cantidad };
        carrito.push(producto);
    }

    actualizarCarrito();
}


function eliminarDelCarrito(index) {
    carrito.splice(index, 1);
    actualizarCarrito();
}

// function actualizarCarrito() {
//    const carritoItems = document.getElementById("carrito-items");
//     carritoItems.innerHTML = '';
//     total = 0;
// document.getElementById("btn-pagar").disabled = carrito.length === 0;
//     if (carrito.length === 0) {
//         carritoItems.innerHTML = '<p>Tu carrito est√° vac√≠o.</p>';
//         document.getElementById("envio-gratis").style.display = "none";
//         document.getElementById("total").textContent = "0";
//         document.getElementById("contador-carrito").textContent = "0";
//         return;
//     }

//     carrito.forEach((item, index) => {
//         const subtotal = item.precio * item.cantidad;
//         total += subtotal;

//         carritoItems.innerHTML += `
//             <div class="carrito-item">
//                 <img src="${item.imagen}" alt="${item.nombre}">
//                 <div class="carrito-detalle">
//                     <span>${item.nombre}</span>
//                     <div class="carrito-controles">
//                         <button onclick="cambiarCantidad(${index}, -1)">‚àí</button>
//                         <span>${item.cantidad}</span>
//                         <button onclick="cambiarCantidad(${index}, 1)">+</button>
//                         <span>$${subtotal}</span>
//                         <button onclick="eliminarDelCarrito(${index})">‚ùå</button>
//                     </div>
//                 </div>
//             </div>
//         `;
//     });

//     const envioGratis = document.getElementById("envio-gratis");
//     if (total >= ENVIO_GRATIS_MIN) {
//         envioGratis.style.color = "green";
//         envioGratis.innerText = "¬°Tienes env√≠o gratis!";
//         envioGratis.style.display = "block";
//         document.getElementById("total").textContent = total;
//     } else {
//         envioGratis.style.color = "red";
//         envioGratis.innerText = "Costo de env√≠o: $150";
//         envioGratis.style.display = "block";
//         document.getElementById("total").textContent = total + COSTO_ENVIO;
//     }

//     document.getElementById("contador-carrito").textContent = carrito.length;
//     const btnPagar = document.getElementById("btn-pagar");
//     if (carrito.length === 0) {
//         carritoItems.innerHTML = '<p>Tu carrito est√° vac√≠o.</p>';
//         document.getElementById("total").textContent = "0";
//         document.getElementById("contador-carrito").textContent = "0";
//         btnPagar.style.display = "none";
//         return;
//     } else {
//         btnPagar.style.display = "inline-block";
//     }
    
// }
function actualizarCarrito() {
    const carritoItems = document.getElementById("carrito-items");
    const btnPagar = document.getElementById("btn-pagar");
    const envioGratis = document.getElementById("envio-gratis");

    carritoItems.innerHTML = '';
    let total = 0;

    // Mostrar u ocultar el bot√≥n de pagar y estado visual
    if (carrito.length === 0) {
        carritoItems.innerHTML = '<p style="text-align: center;">Tu carrito est√° vac√≠o.</p>';
        document.getElementById("total").textContent = "0";
        document.getElementById("contador-carrito").textContent = "0";
        envioGratis.style.display = "none";
        return;
    } else {
        btnPagar.style.display = "inline-block"; // Muestra el bot√≥n
        btnPagar.disabled = false;               // Activa el bot√≥n
    }

    carrito.forEach((item, index) => {
        const subtotal = item.precio * item.cantidad;
        total += subtotal;

        carritoItems.innerHTML += `
            <div class="carrito-item">
                <img src="${item.imagen}" alt="${item.nombre}">
                <div class="carrito-detalle">
                    <span>${item.nombre}</span>
                    <div class="carrito-controles">
                        <button onclick="cambiarCantidad(${index}, -1)">‚àí</button>
                        <span>${item.cantidad}</span>
                        <button onclick="cambiarCantidad(${index}, 1)">+</button>
                        <span>$${subtotal}</span>
                        <button onclick="eliminarDelCarrito(${index})">‚ùå</button>
                    </div>
                </div>
            </div>
        `;
    });

    if (total >= ENVIO_GRATIS_MIN) {
        envioGratis.style.color = "green";
        envioGratis.innerText = "¬°Tienes env√≠o gratis!";
        envioGratis.style.display = "block";
        document.getElementById("total").textContent = total;
    } else {
        envioGratis.style.color = "red";
        envioGratis.innerText = "Costo de env√≠o: $150";
        envioGratis.style.display = "block";
        document.getElementById("total").textContent = total + COSTO_ENVIO;
    }

    document.getElementById("contador-carrito").textContent = carrito.length;
}

// function cambiarCantidad(index, cambio) {
//     carrito[index].cantidad += cambio;
//     if (carrito[index].cantidad <= 0) {
//         carrito.splice(index, 1); // elimina si la cantidad es 0
//     }
//     actualizarCarrito();
// }
function cambiarCantidad(index, cambio) {
    if (!carrito[index]) return;

    let nuevaCantidad = carrito[index].cantidad + cambio;

    // Limitar a m√≠nimo 1 y m√°ximo 10 unidades
    if (nuevaCantidad < 1) {
        nuevaCantidad = 1;
    } else if (nuevaCantidad > 10) {
        nuevaCantidad = 10;
        Swal.fire({
            icon: 'error',
            title: 'L√≠mite excedido',
            text: 'S√≥lo puedes agregar un m√°ximo de 10 unidades por producto.',
            showConfirmButton: false,
             timerProgressBar: true,
              customClass: {
              popup: 'my-timer'  // Aplica la clase para personalizar el estilo
              },
            timer: 1900
        });
    }

    carrito[index].cantidad = nuevaCantidad;
    actualizarCarrito();
}


function mostrarFormularioPago() {
  if (carrito.length === 0) return; // No hacer nada si el carrito est√° vac√≠o
    numeroPedido = generarNumeroPedidoAleatorio();
    document.getElementById("form-pedido").value = numeroPedido;
    const totalFinal = total >= ENVIO_GRATIS_MIN ? total : total + COSTO_ENVIO;
    document.getElementById("total-final").value = totalFinal;

    document.getElementById("formularioPago").classList.remove("oculto");
    document.getElementById("modal-overlay").classList.remove("oculto");

    // Establecer el total actual al input oculto
    document.getElementById("total-final").value = total;
}


function cerrarFormularioPago() {
    document.getElementById("formularioPago").classList.add("oculto");
    document.getElementById("modal-overlay").classList.add("oculto");
}

function enviarFormularioYSPEI() {
    // Asegurarse de que el n√∫mero de pedido est√© en el formulario
    document.getElementById("form-pedido").value = numeroPedido;

    const form = document.getElementById("form-datos");

    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }

    // Obtener el total desde el DOM y asegurarse de que sea un n√∫mero
    const totalDOM = parseFloat(document.getElementById("total").innerText) || 0;
    const envioGratisMin = typeof ENVIO_GRATIS_MIN !== "undefined" ? ENVIO_GRATIS_MIN : 500;
    const costoEnvio = typeof COSTO_ENVIO !== "undefined" ? COSTO_ENVIO : 150;

    const totalFinal = totalDOM >= envioGratisMin ? totalDOM : totalDOM + costoEnvio;

    // Asignar al campo oculto
    document.getElementById("total-final").value = totalFinal;

    const formData = new FormData(form);

    fetch(form.action, {
        method: "POST",
        body: formData,
        headers: { 'Accept': 'application/json' }
    }).then(response => {
        if (response.ok) {
            cerrarFormularioPago();

            Swal.fire({
                title: 'Pago por SPEI',
                html: `
                    <p><strong>Banco:</strong> BBVA<br>
                    <strong>Cuenta:</strong> 0125180910<br>
                    <strong>CLABE:</strong> 012683001251809105<br>
                    <strong>Total:</strong> $${totalFinal}<br>
                    <strong>Concepto:</strong> ${numeroPedido}<br><br>
                    Enviar comprobante a: <br>
                    <a href="mailto:invernaderosrld@gmail.com">invernaderosrld@gmail.com</a> o por <a href="https://wa.me/5535075566" target="_blank">WhatsApp</a> <br>
                    <strong>Una vez recibido el comprobante, te enviaremos el n√∫mero de rastreo de tu producto.</strong>
                    </p>
                `,
                icon: 'info',
                confirmButtonText: 'Entendido',
                allowOutsideClick: true
            });

            reiniciarCarrito();
            document.getElementById("carrito").classList.add("oculto");
        } else {
            Swal.fire("Error", "No se pudo enviar el formulario. Int√©ntalo m√°s tarde.", "error");
        }
    }).catch(error => {
        Swal.fire("Error", "Hubo un problema enviando el formulario.", "error");
    });
}


function reiniciarCarrito() {
    carrito = [];
    total = 0;
    actualizarCarrito();
}
document.querySelectorAll(".input-cantidad").forEach(input => {
    input.addEventListener("input", function () {
        if (parseInt(this.value) > 10) {
            this.value = 10;
        } else if (parseInt(this.value) < 1 || isNaN(this.value)) {
            this.value = 1;
        }
    });
});

</script>

</body>
<footer class="footer">
    <div class="barra">
        <a class="logo" href="index.html">
            <img src="img/Logo_Final.jpg" alt="logo" style="width: 10rem; height: 10rem; margin: 1.5rem;">
        </a>
        <p style="color: white; font-size: 1rem; margin: 1rem;">¬© BIOTECNOLOG√çAS RLD | TODOS LOS DERECHOS RESERVADOS | <a href="avisolegal.html" style="color: white;" target="_blank">AVISO LEGAL</a> | <a href="avisoprivacidad.html" style="color: white;" target="_blank">AVISO DE PRIVACIDAD</a> |</p>
        <nav class="navegacion">
            <a href="nosotros.html" class="navegacion__enlace">Nosotros</a>
            <a href="visitas.html" class="navegacion__enlace">Visitas</a>
            <a href="contacto.html" class="navegacion__enlace">Contacto</a>
        </nav>
    </div>
</div>
</footer>
</html>